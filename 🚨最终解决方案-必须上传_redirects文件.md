# ğŸš¨ æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼šå¿…é¡»ä¸Šä¼  `_redirects` æ–‡ä»¶

## âŒ å½“å‰é—®é¢˜

æ ¹æ®ä½ æä¾›çš„ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨ï¼Œ**ä»ç„¶ç¼ºå°‘ `_redirects` æ–‡ä»¶**ï¼

è¿™å¯¼è‡´ï¼š
- `ERR_CONNECTION_CLOSED` é”™è¯¯
- SPA è·¯ç”±æ— æ³•å·¥ä½œ
- æ— æ³•è®¿é—® `/dashboard`ã€`/login` ç­‰è·¯ç”±

---

## âœ… è§£å†³æ–¹æ¡ˆï¼šç«‹å³é‡æ–°ä¸Šä¼ åŒ…å« `_redirects` çš„å®Œæ•´ dist

### ğŸ“‹ å®Œæ•´çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆå¿…é¡»å…¨éƒ¨ä¸Šä¼ ï¼‰

è¯·æŒ‰ç…§ä»¥ä¸‹åˆ—è¡¨ï¼Œç¡®ä¿**æ‰€æœ‰æ–‡ä»¶**éƒ½è¢«ä¸Šä¼ ï¼š

```
dist/
â”œâ”€â”€ index.html                    âœ… å·²æœ‰
â”œâ”€â”€ _redirects                    âŒ **å¿…é¡»æ·»åŠ ï¼**
â”œâ”€â”€ logo-cube.jpg                 âœ… å·²æœ‰
â”œâ”€â”€ assets/                       âœ… å·²æœ‰ç›®å½•
â”‚   â”œâ”€â”€ html2canvas.esm-BfxBtG_O.js
â”‚   â”œâ”€â”€ index-BoaVKOxD.js
â”‚   â”œâ”€â”€ index-DImtx3m1.css
â”‚   â”œâ”€â”€ index-mAYGN1jo.js
â”‚   â”œâ”€â”€ index.es-CrZdzf1L.js
â”‚   â””â”€â”€ purify.es-B6FQ9oRL.js
â””â”€â”€ functions/                    âœ… å·²æœ‰ç›®å½•
    â””â”€â”€ _middleware.js
```

---

## ğŸ¯ `_redirects` æ–‡ä»¶çš„é‡è¦æ€§

### æ–‡ä»¶å†…å®¹ï¼š
```
/*    /index.html   200
```

### ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

1. **ç›´æ¥ä¸Šä¼  dist çš„é™åˆ¶**
   - å½“ä½ ç›´æ¥ä¸Šä¼  `dist` ç›®å½•æ—¶ï¼ŒCloudflare Pages å¯èƒ½ä¸ä¼šè‡ªåŠ¨è¯†åˆ« `functions/_middleware.js`
   - è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ çš„ Functions æ ‡ç­¾æ˜¾ç¤º"æ²¡æœ‰æ£€æµ‹åˆ° Functions"

2. **`_redirects` ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ**
   - `_redirects` æ–‡ä»¶æ˜¯ Cloudflare Pages çš„æ ‡å‡†é…ç½®æ–‡ä»¶
   - å³ä½¿ Functions ä¸èµ·ä½œç”¨ï¼Œ`_redirects` ä¹Ÿèƒ½ç¡®ä¿è·¯ç”±æ­£å¸¸å·¥ä½œ

3. **åŒé‡ä¿éšœ**
   - ä¸Šä¼  `_redirects` æ–‡ä»¶
   - åŒæ—¶ä¸Šä¼  `functions/_middleware.js`ï¼ˆå¦‚æœ Functions å·¥ä½œï¼Œä¼šä¼˜å…ˆä½¿ç”¨ï¼‰

---

## ğŸ“ ç«‹å³æ“ä½œæ­¥éª¤

### æ­¥éª¤ 1ï¼šç¡®è®¤ `_redirects` æ–‡ä»¶å­˜åœ¨

æ£€æŸ¥ `dist/_redirects` æ–‡ä»¶ï¼š

- æ–‡ä»¶è·¯å¾„ï¼š`dist/_redirects`
- æ–‡ä»¶å†…å®¹åº”è¯¥æ˜¯ï¼š
  ```
  /*    /index.html   200
  ```

### æ­¥éª¤ 2ï¼šé‡æ–°ä¸Šä¼ å®Œæ•´çš„ dist ç›®å½•

**æ–¹æ³• Aï¼šå‹ç¼©åä¸Šä¼ ï¼ˆæœ€ç®€å•ï¼‰**

1. **å‹ç¼© dist ç›®å½•**
   - å³é”®ç‚¹å‡» `dist` æ–‡ä»¶å¤¹
   - é€‰æ‹©"å‹ç¼©ä¸º ZIP æ–‡ä»¶"æˆ–"æ·»åŠ åˆ°å‹ç¼©æ–‡ä»¶"
   - åˆ›å»º `dist.zip`

2. **ä¸Šä¼  ZIP æ–‡ä»¶**
   - è¿›å…¥ Cloudflare Pages æ§åˆ¶å°
   - æ‰¾åˆ°"ä¸Šä¼ æ–‡ä»¶"æˆ–"Upload files"é€‰é¡¹
   - é€‰æ‹© `dist.zip` æ–‡ä»¶
   - Cloudflare ä¼šè‡ªåŠ¨è§£å‹æ‰€æœ‰æ–‡ä»¶

3. **ä¼˜ç‚¹ï¼š**
   - ç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½è¢«ä¸Šä¼ 
   - åŒ…æ‹¬ `_redirects` æ–‡ä»¶
   - ä¸ä¼šé—æ¼ä»»ä½•æ–‡ä»¶

**æ–¹æ³• Bï¼šæ‰‹åŠ¨ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶**

å¦‚æœä¸èƒ½ç”¨ ZIPï¼Œæ‰‹åŠ¨ä¸Šä¼ ï¼š

1. **å…ˆä¸Šä¼ æ ¹ç›®å½•æ–‡ä»¶**
   - âœ… `index.html`
   - âœ… **`_redirects`** âš ï¸ **è¿™ä¸ªå¿…é¡»æ·»åŠ ï¼**
   - âœ… `logo-cube.jpg`

2. **å†ä¸Šä¼  assets ç›®å½•**
   - åˆ›å»º `assets` æ–‡ä»¶å¤¹
   - ä¸Šä¼ æ‰€æœ‰ JS/CSS æ–‡ä»¶

3. **æœ€åä¸Šä¼  functions ç›®å½•**
   - åˆ›å»º `functions` æ–‡ä»¶å¤¹
   - ä¸Šä¼  `_middleware.js`

---

## âœ… ä¸Šä¼ åéªŒè¯

### 1. æ£€æŸ¥éƒ¨ç½²èµ„äº§åˆ—è¡¨

è¿›å…¥ Cloudflare Pages æ§åˆ¶å°ï¼š
- Workers & Pages â†’ ä½ çš„é¡¹ç›® â†’ æœ€æ–°éƒ¨ç½²
- æŸ¥çœ‹"èµ„äº§å·²ä¸Šä¼ "æ ‡ç­¾
- **ç¡®è®¤ `_redirects` æ–‡ä»¶å­˜åœ¨** âœ…

### 2. æ£€æŸ¥ Functionsï¼ˆå¯é€‰ï¼‰

è¿›å…¥"å‡½æ•°"æ ‡ç­¾ï¼š
- å¦‚æœçœ‹åˆ° `_middleware.js` â†’ è¯´æ˜ Functions æ­£å¸¸å·¥ä½œ âœ…
- å¦‚æœä»ç„¶æ˜¾ç¤º"æ²¡æœ‰æ£€æµ‹åˆ° Functions" â†’ æ²¡å…³ç³»ï¼Œ`_redirects` ä¼šèµ·ä½œç”¨ âœ…

### 3. æµ‹è¯•ç½‘ç«™è®¿é—®

1. **è®¿é—®æ ¹è·¯å¾„**
   - `https://mindcube.pages.dev/`
   - åº”è¯¥èƒ½æ­£å¸¸åŠ è½½

2. **è®¿é—®å…¶ä»–è·¯ç”±**
   - `https://mindcube.pages.dev/login`
   - `https://mindcube.pages.dev/dashboard`
   - æ‰€æœ‰è·¯ç”±éƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ âœ…

---

## ğŸ” å…³äº Functions çš„è¯´æ˜

### ä¸ºä»€ä¹ˆ Functions å¯èƒ½ä¸å·¥ä½œï¼Ÿ

ä»æˆªå›¾çœ‹ï¼ŒCloudflare Pages æ˜¾ç¤ºï¼š
> "You can not tail this deployment as it does not have a Pages Function"

è¿™è¯´æ˜ï¼š
- ç›´æ¥ä¸Šä¼  `dist` ç›®å½•æ—¶ï¼ŒCloudflare Pages å¯èƒ½ä¸ä¼šæ£€æµ‹ `functions` ç›®å½•
- æˆ–è€… Functions éœ€è¦ä»é¡¹ç›®æ ¹ç›®å½•è¯»å–ï¼Œè€Œä¸æ˜¯ä» `dist` ç›®å½•

### ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼

- âœ… **`_redirects` æ–‡ä»¶å¯ä»¥å•ç‹¬å·¥ä½œ**
- âœ… **ä¸éœ€è¦ Functions ä¹Ÿèƒ½æ­£å¸¸è·¯ç”±**
- âœ… **`_redirects` æ˜¯ Cloudflare Pages çš„æ ‡å‡†é…ç½®æ–¹å¼**

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

ä¸Šä¼ å‰ç¡®è®¤ï¼š
- [ ] `dist/_redirects` æ–‡ä»¶å­˜åœ¨
- [ ] `_redirects` æ–‡ä»¶å†…å®¹æ­£ç¡®ï¼š`/*    /index.html   200`
- [ ] å‡†å¤‡å¥½ä¸Šä¼ å®Œæ•´çš„ dist ç›®å½•

ä¸Šä¼ åç¡®è®¤ï¼š
- [ ] éƒ¨ç½²èµ„äº§åˆ—è¡¨åŒ…å« `_redirects` æ–‡ä»¶
- [ ] ç½‘ç«™æ ¹è·¯å¾„å¯ä»¥è®¿é—®
- [ ] å…¶ä»–è·¯ç”±ï¼ˆå¦‚ `/login`ï¼‰å¯ä»¥è®¿é—®

---

## ğŸ¯ å…³é”®ç‚¹æ€»ç»“

1. **`_redirects` æ–‡ä»¶æ˜¯å¿…é¡»çš„** - æ²¡æœ‰å®ƒï¼ŒSPA è·¯ç”±æ— æ³•å·¥ä½œ
2. **ç›´æ¥ä¸Šä¼  dist æ—¶ï¼ŒFunctions å¯èƒ½ä¸å·¥ä½œ** - ä½† `_redirects` å¯ä»¥å•ç‹¬å·¥ä½œ
3. **æœ€ç®€å•çš„æ–¹æ³•** - å‹ç¼©æ•´ä¸ª `dist` ç›®å½•ä¸º ZIP åä¸Šä¼ 

---

## ğŸš€ ç°åœ¨å°±æ‰§è¡Œ

1. âœ… ç¡®è®¤ `dist/_redirects` æ–‡ä»¶å­˜åœ¨
2. âœ… å‹ç¼©æ•´ä¸ª `dist` ç›®å½•ä¸º `dist.zip`
3. âœ… ä¸Šä¼  `dist.zip` åˆ° Cloudflare Pages
4. âœ… ç­‰å¾…éƒ¨ç½²å®Œæˆ
5. âœ… æµ‹è¯•ç½‘ç«™è®¿é—®

å®Œæˆåå‘Šè¯‰æˆ‘ç»“æœï¼

