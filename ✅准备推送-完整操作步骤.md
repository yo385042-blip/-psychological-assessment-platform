# âœ… å‡†å¤‡æ¨é€ - å®Œæ•´æ“ä½œæ­¥éª¤

## ğŸ‰ ä¿®å¤å·²å®Œæˆï¼

**å·²å®Œæˆçš„å·¥ä½œï¼š**
- âœ… åˆ›å»ºäº† `.npmrc` æ–‡ä»¶ï¼ˆé…ç½® `legacy-peer-deps=true`ï¼‰
- âœ… é‡æ–°ç”Ÿæˆäº† `package-lock.json`ï¼ˆä½¿ç”¨æ–°é…ç½®ï¼‰
- âœ… éªŒè¯äº† `npm ci --dry-run` æ²¡æœ‰é”™è¯¯
- âœ… ç¡®è®¤ `package-lock.json` ä¸­æ²¡æœ‰ `terser`

---

## ğŸš€ ç°åœ¨éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤

### æ­¥éª¤ 1ï¼šæäº¤å¹¶æ¨é€æ‰€æœ‰æ›´æ”¹

**åœ¨ PowerShell ä¸­æ‰§è¡Œï¼š**

```powershell
# 1. æ£€æŸ¥çŠ¶æ€
git status

# 2. æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add .npmrc package-lock.json package.json

# 3. æäº¤
git commit -m "æ·»åŠ  .npmrc é…ç½®å¹¶é‡æ–°ç”Ÿæˆ package-lock.jsonï¼šä¿®å¤ npm ci é”™è¯¯"

# 4. æ¨é€åˆ° GitHub
git push origin main
```

---

### æ­¥éª¤ 2ï¼šåœ¨ Cloudflare Pages ä¸­ä¿®æ”¹æ„å»ºå‘½ä»¤ï¼ˆå…³é”®ï¼ï¼‰

**è¿™æ˜¯æœ€é‡è¦çš„æ­¥éª¤ï¼**

1. **è®¿é—® Cloudflare Dashboard**
   - ç½‘å€ï¼šhttps://dash.cloudflare.com/
   
2. **è¿›å…¥ä½ çš„é¡¹ç›®**
   - Workers & Pages â†’ ä½ çš„é¡¹ç›®
   
3. **è¿›å…¥è®¾ç½®**
   - ç‚¹å‡» "è®¾ç½®" (Settings) æ ‡ç­¾
   
4. **æ‰¾åˆ°æ„å»ºé…ç½®**
   - åœ¨ "æ„å»ºå’Œéƒ¨ç½²" (Builds & deployments) éƒ¨åˆ†
   
5. **ä¿®æ”¹æ„å»ºå‘½ä»¤**
   
   **æ‰¾åˆ° "æ„å»ºå‘½ä»¤" (Build command) å­—æ®µï¼Œä¿®æ”¹ä¸ºï¼š**
   
   ```bash
   npm install --legacy-peer-deps && npm run build
   ```
   
   **æˆ–è€…ï¼ˆå¦‚æœä¸Šé¢ä¸è¡Œï¼Œä½¿ç”¨è¿™ä¸ªæ›´å¥å£®çš„ç‰ˆæœ¬ï¼‰ï¼š**
   
   ```bash
   npm ci --legacy-peer-deps || npm install --legacy-peer-deps && npm run build
   ```
   
6. **ä¿å­˜è®¾ç½®**
   - ç‚¹å‡» "ä¿å­˜" (Save) æŒ‰é’®
   
7. **è§¦å‘æ–°éƒ¨ç½²**
   - è¿›å…¥ "éƒ¨ç½²" (Deployments) æ ‡ç­¾
   - ç‚¹å‡» "é‡æ–°éƒ¨ç½²" (Redeploy) æˆ– "é‡æ–°æ„å»º" (Rebuild) æŒ‰é’®

---

## ğŸ“‹ ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æ­¥éª¤ï¼Ÿ

### 1. `.npmrc` æ–‡ä»¶
- é…ç½® npm ä½¿ç”¨å®½æ¾çš„ peer dependency è§£æ
- Cloudflare Pages ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶
- `legacy-peer-deps=true` å‘Šè¯‰ npm å¿½ç•¥å¯é€‰çš„ peer dependencies

### 2. ä¿®æ”¹æ„å»ºå‘½ä»¤
- Cloudflare Pages åœ¨è¿è¡Œæ„å»ºå‘½ä»¤ä¹‹å‰ä¼šè‡ªåŠ¨è¿è¡Œ `npm ci`
- é€šè¿‡æ·»åŠ  `--legacy-peer-deps` æ ‡å¿—ï¼Œè®© `npm ci` ä½¿ç”¨å®½æ¾çš„æ£€æŸ¥
- å¦‚æœ `npm ci` å¤±è´¥ï¼Œä¼šå›é€€åˆ° `npm install`

### 3. é‡æ–°ç”Ÿæˆçš„ package-lock.json
- ä½¿ç”¨æ–°çš„ `.npmrc` é…ç½®ç”Ÿæˆ
- ä¸åŒ…å« `terser`ï¼ˆå› ä¸ºä¸éœ€è¦ï¼‰
- ä¸ `package.json` å®Œå…¨åŒæ­¥

---

## âœ… é¢„æœŸç»“æœ

å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼š

1. âœ… `.npmrc` æ–‡ä»¶ä¼šè¢«æäº¤ï¼ŒCloudflare Pages ä¼šè¯»å–å®ƒ
2. âœ… `package-lock.json` ä¼šä½¿ç”¨å®½æ¾çš„é…ç½®
3. âœ… æ„å»ºå‘½ä»¤ä½¿ç”¨ `--legacy-peer-deps` æ ‡å¿—
4. âœ… `npm ci` åº”è¯¥èƒ½å¤ŸæˆåŠŸè¿è¡Œ
5. âœ… æ„å»ºåº”è¯¥èƒ½å¤Ÿå®Œæˆ
6. âœ… ç½‘ç«™åº”è¯¥å¯ä»¥æ­£å¸¸è®¿é—®

---

## ğŸ¯ æ‰§è¡Œæ¸…å•

- [ ] æ­¥éª¤ 1ï¼šæäº¤å¹¶æ¨é€æ›´æ”¹ï¼ˆ`.npmrc`, `package-lock.json`ï¼‰
- [ ] æ­¥éª¤ 2ï¼šåœ¨ Cloudflare Dashboard ä¸­ä¿®æ”¹æ„å»ºå‘½ä»¤
- [ ] æ­¥éª¤ 3ï¼šä¿å­˜è®¾ç½®å¹¶è§¦å‘æ–°éƒ¨ç½²
- [ ] æ­¥éª¤ 4ï¼šç­‰å¾…æ„å»ºå®Œæˆ
- [ ] æ­¥éª¤ 5ï¼šæ£€æŸ¥æ„å»ºæ—¥å¿—ï¼Œç¡®è®¤æˆåŠŸ
- [ ] æ­¥éª¤ 6ï¼šè®¿é—®ç½‘ç«™ï¼ŒéªŒè¯æ˜¯å¦æ­£å¸¸

---

## ğŸ’¡ é‡è¦æç¤º

1. **å¿…é¡»ä¿®æ”¹ Cloudflare Pages çš„æ„å»ºå‘½ä»¤**
   - è¿™æ˜¯å…³é”®æ­¥éª¤ï¼
   - ä¸ä¿®æ”¹æ„å»ºå‘½ä»¤ï¼Œ`.npmrc` æ–‡ä»¶å¯èƒ½ä¸å¤Ÿ

2. **å¦‚æœæ„å»ºä»ç„¶å¤±è´¥**
   - å‘Šè¯‰æˆ‘é”™è¯¯ä¿¡æ¯
   - æˆ‘ä¼šç»§ç»­å¸®ä½ è§£å†³

3. **æ„å»ºé€šå¸¸éœ€è¦ 1-3 åˆ†é’Ÿ**
   - è¯·è€å¿ƒç­‰å¾…

---

## ğŸš€ ç°åœ¨å¼€å§‹æ‰§è¡Œ

**è¯·æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œï¼**

å®Œæˆåå‘Šè¯‰æˆ‘ç»“æœï¼Œæˆ‘ä¼šç»§ç»­å¸®ä½ æ£€æŸ¥ï¼

