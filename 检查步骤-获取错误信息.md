# 🔍 检查步骤 - 获取错误信息详细指南

本文档将指导你如何获取 Cloudflare Pages 部署问题的详细信息。

---

## 📋 需要收集的信息

为了诊断问题，我们需要以下信息：

1. ✅ Cloudflare Pages 构建日志（是否有错误）
2. ✅ Functions 页面是否显示 `_middleware.js` 为 Active
3. ✅ 浏览器控制台的具体错误信息

---

## 步骤 1：查看 Cloudflare Pages 构建日志

### 1.1 登录 Cloudflare 控制台

1. 打开浏览器，访问：https://dash.cloudflare.com/
2. 使用你的 Cloudflare 账号登录

### 1.2 进入 Pages 项目

1. 在左侧菜单中，点击 **"Workers & Pages"** 或 **"Pages"**
2. 在项目列表中找到你的项目（如 `mindcube` 或你的项目名称）
3. 点击项目名称进入项目详情

### 1.3 查看部署历史

1. 在项目页面，你会看到 **"Deployments"**（部署）标签页
2. 点击 **"Deployments"** 标签
3. 你会看到所有部署历史，最新的部署在顶部

### 1.4 查看构建日志

1. **找到最新的部署**（通常是第一个）
2. **点击部署条目**，展开详情
3. **点击 "View build log"** 或 **"查看构建日志"** 按钮
4. 日志会显示：
   - ✅ 构建是否成功
   - ❌ 是否有错误信息
   - 📦 构建步骤和输出

### 1.5 截图或复制日志

**重要信息需要查看：**

- ✅ 构建是否成功（Success / Failed）
- ❌ 是否有错误信息（Error messages）
- 📝 构建命令输出（Build command output）
- 📦 Functions 是否正确部署

**如何保存日志：**
- **方法 1（推荐）**：截图整个日志
- **方法 2**：复制错误部分文本
- **方法 3**：使用浏览器开发者工具保存页面

---

## 步骤 2：检查 Functions 页面

### 2.1 进入 Functions 页面

1. 在项目页面，找到 **"Functions"** 或 **"Functions & Middleware"** 标签
2. 点击进入 Functions 页面

### 2.2 查看中间件状态

在 Functions 页面，你应该能看到：

- **Functions 列表**：
  - `_middleware.js` 应该显示在列表中
  - 状态应该是 **"Active"**（活动）或 **"Deployed"**（已部署）

### 2.3 检查中间件详情

1. **点击 `_middleware.js`** 查看详情
2. 查看：
   - ✅ 状态：是否显示为 Active
   - 📅 最后部署时间
   - ❌ 是否有错误信息

### 2.4 如果没有看到 _middleware.js

**可能的原因：**
- ❌ `functions` 目录不在项目根目录
- ❌ 没有使用 Git 集成部署
- ❌ 构建过程中出错

**需要检查：**
1. 确认 `functions/_middleware.js` 文件存在
2. 确认文件已提交到 Git（如果使用 Git）
3. 查看构建日志是否有错误

---

## 步骤 3：查看浏览器控制台错误信息

### 3.1 打开浏览器开发者工具

**Chrome/Edge：**
- 按 `F12` 键
- 或右键点击页面 → 选择 **"检查"** / **"Inspect"**
- 或按 `Ctrl + Shift + I`（Windows）或 `Cmd + Option + I`（Mac）

**Firefox：**
- 按 `F12` 键
- 或按 `Ctrl + Shift + I`（Windows）或 `Cmd + Option + I`（Mac）

**Safari：**
- 需要先启用开发者工具：
  - Safari → 偏好设置 → 高级 → 勾选"在菜单栏中显示开发菜单"
- 然后按 `Cmd + Option + I`

### 3.2 打开控制台（Console）标签

1. 在开发者工具顶部，点击 **"Console"**（控制台）标签
2. 你会看到：
   - 🔴 红色：错误（Errors）
   - 🟡 黄色：警告（Warnings）
   - 🔵 蓝色：信息（Info）

### 3.3 清除并重新加载

1. **点击控制台中的清除按钮**（🚫 图标）清除旧信息
2. **刷新页面**（按 `F5` 或 `Ctrl + R`）
3. **观察新的错误信息**

### 3.4 查看网络请求

1. 在开发者工具中，点击 **"Network"**（网络）标签
2. **刷新页面**（按 `F5`）
3. 查看请求列表：
   - ❌ 红色的请求 = 失败的请求
   - ✅ 正常的请求通常是绿色或白色

### 3.5 记录错误信息

**需要记录的信息：**

1. **控制台错误：**
   - 错误消息（Error message）
   - 错误类型（Error type）
   - 错误发生的文件和行号

2. **网络错误：**
   - 失败的请求 URL
   - HTTP 状态码（如 404、500、ERR_CONNECTION_CLOSED）
   - 错误描述

**如何保存：**
- **方法 1（推荐）**：截图整个控制台和网络标签
- **方法 2**：右键点击错误 → 复制错误信息
- **方法 3**：使用浏览器导出功能（如果有）

---

## 步骤 4：获取完整错误报告

### 4.1 创建一个错误报告文档

创建一个文本文件，包含以下信息：

```
=== Cloudflare Pages 部署错误报告 ===

1. 项目信息
   - 项目名称：[你的项目名]
   - 部署 URL：[你的部署 URL]
   - 部署时间：[部署时间]

2. 构建日志
   - 构建状态：[成功/失败]
   - 错误信息：[粘贴或描述错误]
   - [附上构建日志截图]

3. Functions 状态
   - _middleware.js 状态：[Active/不存在/错误]
   - [附上 Functions 页面截图]

4. 浏览器控制台错误
   - 错误信息：[粘贴错误]
   - [附上控制台截图]

5. 网络请求错误
   - 失败的请求：[列出失败的 URL]
   - HTTP 状态码：[如 404, 500 等]
   - [附上网络标签截图]
```

### 4.2 使用浏览器截图工具

**Windows：**
- 使用 `Win + Shift + S` 截取部分屏幕
- 使用 `Print Screen` 截取整个屏幕

**Mac：**
- 使用 `Cmd + Shift + 3` 截取整个屏幕
- 使用 `Cmd + Shift + 4` 截取选择区域

**浏览器扩展：**
- 可以使用浏览器截图扩展，如：
  - Full Page Screen Capture（Chrome）
  - FireShot（多浏览器）

---

## 📸 推荐的截图位置

为了诊断问题，请截图以下内容：

### 截图 1：构建日志
- 位置：Cloudflare Pages → 项目 → Deployments → 最新部署 → Build Log
- 内容：整个构建日志，特别是错误部分

### 截图 2：Functions 页面
- 位置：Cloudflare Pages → 项目 → Functions
- 内容：Functions 列表，特别是 `_middleware.js` 的状态

### 截图 3：浏览器控制台
- 位置：浏览器开发者工具 → Console 标签
- 内容：所有错误和警告信息

### 截图 4：网络请求
- 位置：浏览器开发者工具 → Network 标签
- 内容：失败的请求（红色标记的请求）

### 截图 5：页面错误提示
- 位置：浏览器显示的错误页面
- 内容：完整的错误页面（如 ERR_CONNECTION_CLOSED）

---

## 🔧 常见错误信息及含义

### ERR_CONNECTION_CLOSED
- **含义**：连接被关闭
- **可能原因**：
  - 服务器配置问题
  - 中间件未正确部署
  - 路由配置问题

### 404 Not Found
- **含义**：文件未找到
- **可能原因**：
  - SPA 路由未配置
  - 静态资源路径错误
  - 文件未正确部署

### 500 Internal Server Error
- **含义**：服务器内部错误
- **可能原因**：
  - 中间件代码错误
  - Functions 部署失败
  - 服务器配置错误

---

## 📝 检查清单

在收集信息前，请确认：

- [ ] 已登录 Cloudflare 控制台
- [ ] 找到了你的 Pages 项目
- [ ] 查看了最新的构建日志
- [ ] 检查了 Functions 页面
- [ ] 打开了浏览器开发者工具
- [ ] 清除了控制台并重新加载页面
- [ ] 查看了网络请求标签
- [ ] 截图或记录了所有错误信息

---

## 🎯 下一步

收集完以上信息后：

1. **整理所有截图和错误信息**
2. **创建一个报告文档**（使用上面的模板）
3. **将信息提供给我**，我会帮你分析问题并给出解决方案

---

## 💡 提示

- **清除浏览器缓存**后再测试，避免缓存问题
- **使用无痕模式**测试，排除浏览器扩展干扰
- **尝试不同的浏览器**，确认是否为浏览器特定问题
- **检查部署 URL**，确认访问的是正确的地址

---

如果你在收集信息时遇到任何问题，请告诉我具体卡在哪一步，我会提供更详细的指导。

