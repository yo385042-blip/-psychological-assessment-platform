# ğŸš¨ ERR_CONNECTION_CLOSED ä»ç„¶å­˜åœ¨ - æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

## âŒ é—®é¢˜

å³ä½¿ä¸Šä¼ äº†åŒ…å« `_redirects` æ–‡ä»¶çš„ dist ç›®å½•ï¼Œç½‘ç«™ä»ç„¶æ— æ³•è®¿é—®ï¼Œæ˜¾ç¤º `ERR_CONNECTION_CLOSED`ã€‚

---

## ğŸ” å¯èƒ½çš„åŸå› 

1. **`_redirects` æ–‡ä»¶å¯èƒ½æ²¡æœ‰ç”Ÿæ•ˆ**
   - Cloudflare Pages å¯èƒ½éœ€è¦ç‰¹å®šæ ¼å¼æˆ–é…ç½®
   - æˆ–è€… `_redirects` æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®è¯†åˆ«

2. **éƒ¨ç½²é…ç½®é—®é¢˜**
   - å¯èƒ½éƒ¨ç½²æ²¡æœ‰æˆåŠŸå®Œæˆ
   - æˆ–è€…é…ç½®æœ‰é—®é¢˜

---

## âœ… æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼šåœ¨æ§åˆ¶å°æ‰‹åŠ¨é…ç½®è·¯ç”±è§„åˆ™

æ—¢ç„¶ `_redirects` æ–‡ä»¶ä¸èµ·ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Cloudflare Pages æ§åˆ¶å°æ‰‹åŠ¨é…ç½®è·¯ç”±è§„åˆ™ã€‚

### æ­¥éª¤ 1ï¼šæ£€æŸ¥éƒ¨ç½²çŠ¶æ€

1. **è¿›å…¥ Cloudflare Pages æ§åˆ¶å°**
   - Workers & Pages â†’ mindcube é¡¹ç›®

2. **æŸ¥çœ‹æœ€æ–°éƒ¨ç½²**
   - Deployments â†’ æŸ¥çœ‹æœ€æ–°éƒ¨ç½²çš„çŠ¶æ€
   - ç¡®è®¤éƒ¨ç½²æ˜¯å¦æˆåŠŸï¼ˆç»¿è‰²å¯¹å‹¾ï¼‰
   - æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### æ­¥éª¤ 2ï¼šåœ¨ Cloudflare Dashboard é…ç½®è·¯ç”±è§„åˆ™

ç”±äº Cloudflare Pages è®¾ç½®é¡µé¢å¯èƒ½æ²¡æœ‰ç›´æ¥çš„è·¯ç”±é…ç½®é€‰é¡¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Cloudflare Dashboard çš„ Transform Rulesã€‚

#### æ–¹æ³• Aï¼šä½¿ç”¨ Transform Rulesï¼ˆæ¨èï¼‰

1. **è¿›å…¥ Cloudflare Dashboard**
   - è®¿é—®ï¼šhttps://dash.cloudflare.com/
   - é€‰æ‹©ä½ çš„åŸŸåï¼ˆå¦‚æœæœ‰è‡ªå®šä¹‰åŸŸåï¼‰
   - æˆ–è€…è¿›å…¥ Cloudflare Pages é¡¹ç›®

2. **è¿›å…¥ Transform Rules**
   - åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **"Rules"** æˆ– **"è§„åˆ™"**
   - é€‰æ‹© **"Transform Rules"** æˆ– **"è½¬æ¢è§„åˆ™"**
   - é€‰æ‹© **"URL Rewrite"** æˆ– **"URL é‡å†™"**

3. **åˆ›å»ºæ–°è§„åˆ™**
   - ç‚¹å‡» **"Create rule"** æˆ– **"åˆ›å»ºè§„åˆ™"**
   - **è§„åˆ™åç§°ï¼š** SPA Routing
   - **åŒ¹é…æ¡ä»¶ï¼š**
     - Field: URI Path
     - Operator: doesn't match
     - Value: `/assets/*|/*.js|/*.css|/*.jpg|/*.png|/*.svg|/*.ico|/*.woff|/*.woff2`
   - **æ“ä½œï¼š**
     - Rewrite to: Static
     - Path: `/index.html`

#### æ–¹æ³• Bï¼šåœ¨ Cloudflare Pages é¡¹ç›®è®¾ç½®ä¸­æŸ¥æ‰¾

1. **è¿›å…¥é¡¹ç›®è®¾ç½®**
   - Cloudflare Pages â†’ mindcube â†’ è®¾ç½®

2. **æŸ¥æ‰¾ä»¥ä¸‹é€‰é¡¹ï¼š**
   - "Redirects" æˆ– "é‡å®šå‘"
   - "Routes" æˆ– "è·¯ç”±"
   - "Custom Headers" æˆ– "è‡ªå®šä¹‰æ ‡å¤´"
   - "Functions & Middleware" æˆ– "å‡½æ•°å’Œä¸­é—´ä»¶"

3. **å¦‚æœæœ‰è¿™äº›é€‰é¡¹ï¼Œæ·»åŠ è§„åˆ™ï¼š**
   - Pattern: `/*`
   - Rewrite to: `/index.html`
   - Status: `200`

---

## ğŸ¯ å¤‡é€‰æ–¹æ¡ˆï¼šä½¿ç”¨ Cloudflare Workers

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ä¸è¡Œï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ Cloudflare Worker æ¥å¤„ç†è·¯ç”±ï¼š

### åˆ›å»º Worker

1. **è¿›å…¥ Workers & Pages**
   - Cloudflare Dashboard â†’ Workers & Pages

2. **åˆ›å»ºæ–°çš„ Worker**
   - ç‚¹å‡» "Create" æˆ– "åˆ›å»º"
   - é€‰æ‹© "Create Worker" æˆ– "åˆ›å»º Worker"

3. **æ·»åŠ ä»£ç ï¼š**
```javascript
export default {
  async fetch(request) {
    const url = new URL(request.url);
    
    // è·³è¿‡é™æ€èµ„æº
    if (url.pathname.startsWith('/assets/') || 
        url.pathname.match(/\.(js|css|jpg|png|svg|ico|woff|woff2)$/)) {
      return fetch(request);
    }
    
    // å¯¹äºå…¶ä»–è·¯å¾„ï¼Œè¿”å› index.html
    const indexUrl = new URL(request.url);
    indexUrl.pathname = '/index.html';
    return fetch(indexUrl);
  }
}
```

4. **å°† Worker ç»‘å®šåˆ° Pages é¡¹ç›®**

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

è¯·å…ˆç¡®è®¤ä»¥ä¸‹å†…å®¹ï¼š

- [ ] æœ€æ–°éƒ¨ç½²çŠ¶æ€æ˜¯å¦ä¸ºæˆåŠŸï¼ˆç»¿è‰²å¯¹å‹¾ï¼‰ï¼Ÿ
- [ ] éƒ¨ç½²çš„èµ„äº§åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«æ‰€æœ‰æ–‡ä»¶ï¼ˆindex.html, assets, _redirectsï¼‰ï¼Ÿ
- [ ] ç½‘ç«™ URL æ˜¯å¦æ­£ç¡®ï¼ˆmindcube.pages.devï¼‰ï¼Ÿ
- [ ] æ˜¯å¦å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åè®¿é—®ï¼Ÿ
- [ ] æ˜¯å¦å°è¯•ä½¿ç”¨æ— ç—•æ¨¡å¼è®¿é—®ï¼Ÿ

---

## ğŸ’¡ æœ€å¿«è§£å†³æ–¹æ¡ˆ

**å¦‚æœä½ éœ€è¦ç«‹å³è§£å†³é—®é¢˜ï¼Œå»ºè®®ï¼š**

1. **æ£€æŸ¥éƒ¨ç½²æ˜¯å¦æˆåŠŸ**
   - ç¡®è®¤æœ€æ–°éƒ¨ç½²çŠ¶æ€

2. **å°è¯•è®¿é—®å…·ä½“çš„éƒ¨ç½² URL**
   - åœ¨ Deployments é¡µé¢ï¼Œç‚¹å‡»éƒ¨ç½²è¯¦æƒ…
   - å°è¯•è®¿é—®éƒ¨ç½²çš„ä¸´æ—¶ URLï¼ˆå¦‚ `7d59abc2.mindcube.pages.dev`ï¼‰
   - çœ‹æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®

3. **å¦‚æœä¸´æ—¶ URL èƒ½è®¿é—®**
   - é—®é¢˜å¯èƒ½æ˜¯ç”Ÿäº§åˆ†æ”¯é…ç½®
   - æ£€æŸ¥è®¾ç½®ä¸­çš„"ç”Ÿäº§åˆ†æ”¯"æ˜¯å¦æ­£ç¡®

4. **å¦‚æœä¸´æ—¶ URL ä¹Ÿæ— æ³•è®¿é—®**
   - è¯´æ˜éƒ¨ç½²æœ¬èº«æœ‰é—®é¢˜
   - éœ€è¦æ£€æŸ¥æ„å»ºå’Œéƒ¨ç½²è¿‡ç¨‹

---

## ğŸ¯ ç°åœ¨è¯·å‘Šè¯‰æˆ‘

1. **æœ€æ–°éƒ¨ç½²çš„çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ**ï¼ˆæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Ÿï¼‰
2. **éƒ¨ç½²çš„ä¸´æ—¶ URLï¼ˆå¦‚ `7d59abc2.mindcube.pages.dev`ï¼‰èƒ½å¦è®¿é—®ï¼Ÿ**
3. **éƒ¨ç½²çš„èµ„äº§åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«äº†æ‰€æœ‰æ–‡ä»¶ï¼Ÿ**

æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘å¯ä»¥ç»™ä½ æ›´ç²¾ç¡®çš„è§£å†³æ–¹æ¡ˆï¼

