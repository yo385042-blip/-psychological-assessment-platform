# âœ… æ–¹æ¡ˆ 2ï¼šç«‹å³æ‰§è¡Œæ­¥éª¤

## ğŸ‰ å¥½æ¶ˆæ¯ï¼

æˆ‘å·²ç»ç›´æ¥å°† `functions/_middleware.js` å¤åˆ¶åˆ° `dist/functions/_middleware.js` äº†ï¼

---

## ğŸ“‹ ç°åœ¨ä½ éœ€è¦åšçš„

### æ­¥éª¤ 1ï¼šéªŒè¯æ–‡ä»¶å·²å­˜åœ¨

æ£€æŸ¥ `dist/functions/_middleware.js` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
- æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨
- è¿›å…¥ `dist` ç›®å½•
- ç¡®è®¤æœ‰ `functions` æ–‡ä»¶å¤¹
- ç¡®è®¤ `functions` æ–‡ä»¶å¤¹ä¸­æœ‰ `_middleware.js` æ–‡ä»¶

### æ­¥éª¤ 2ï¼šä¸Šä¼  dist ç›®å½•åˆ° Cloudflare Pages

ç°åœ¨ `dist` ç›®å½•å·²ç»åŒ…å« `functions` ç›®å½•äº†ï¼Œç›´æ¥ä¸Šä¼ ï¼š

**æ–¹æ³• Aï¼šé€šè¿‡ Cloudflare Pages æ§åˆ¶å°ä¸Šä¼ **

1. **è¿›å…¥ Cloudflare Pages æ§åˆ¶å°**
   - https://dash.cloudflare.com/
   - Workers & Pages â†’ ä½ çš„é¡¹ç›®ï¼ˆmindcubeï¼‰

2. **åˆ›å»ºæ–°éƒ¨ç½²**
   - ç‚¹å‡» "åˆ›å»ºéƒ¨ç½²" (Create Deployment) æŒ‰é’®
   - æˆ–è€…è¿›å…¥ Deployments æ ‡ç­¾ï¼Œæ‰¾åˆ°ä¸Šä¼ é€‰é¡¹

3. **ä¸Šä¼  dist ç›®å½•**
   - é€‰æ‹©æ•´ä¸ª `dist` æ–‡ä»¶å¤¹
   - ä¸Šä¼ å¹¶ç­‰å¾…éƒ¨ç½²å®Œæˆ

**æ–¹æ³• Bï¼šä½¿ç”¨ Wrangler CLIï¼ˆå¦‚æœä½ å®‰è£…äº†ï¼‰**

```bash
cd dist
wrangler pages deploy .
```

---

## ğŸ” éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼š

1. **è¿›å…¥éƒ¨ç½²è¯¦æƒ…**
   - Deployments â†’ æœ€æ–°éƒ¨ç½²

2. **æ£€æŸ¥ Functions æ ‡ç­¾**
   - ç‚¹å‡» "å‡½æ•°" æ ‡ç­¾
   - âœ… åº”è¯¥èƒ½çœ‹åˆ° `_middleware.js`

3. **æµ‹è¯•ç½‘ç«™**
   - è®¿é—®ä½ çš„ç½‘ç«™ URL
   - æµ‹è¯•é¦–é¡µå’Œè·¯ç”±ï¼ˆå¦‚ `/dashboard`ï¼‰

---

## âœ… é¢„æœŸç»“æœ

ä¸Šä¼ åŒ…å« `functions` ç›®å½•çš„ `dist` åï¼š

- âœ… Functions æ ‡ç­¾ä¼šæ˜¾ç¤º `_middleware.js`
- âœ… ç½‘ç«™åº”è¯¥èƒ½æ­£å¸¸æ‰“å¼€
- âœ… æ‰€æœ‰è·¯ç”±åº”è¯¥èƒ½æ­£å¸¸è®¿é—®

---

## ğŸ¯ ç«‹å³æ‰§è¡Œ

**ç°åœ¨ï¼š**
1. ç¡®è®¤ `dist/functions/_middleware.js` å­˜åœ¨ âœ…ï¼ˆæˆ‘å·²ç»å¸®ä½ åˆ›å»ºäº†ï¼‰
2. ä¸Šä¼ æ•´ä¸ª `dist` ç›®å½•åˆ° Cloudflare Pages
3. ç­‰å¾…éƒ¨ç½²å®Œæˆ
4. æµ‹è¯•ç½‘ç«™

---

## ğŸ’¡ é‡è¦æç¤º

å¦‚æœä»¥åéœ€è¦é‡æ–°æ„å»ºï¼š

```bash
npm run build
```

è¿™ä¼šè‡ªåŠ¨å°† `functions` ç›®å½•å¤åˆ¶åˆ° `dist`ï¼Œå› ä¸ºæˆ‘å·²ç»é…ç½®å¥½äº†ã€‚

---

**ä¸Šä¼ å®Œæˆåå‘Šè¯‰æˆ‘ç»“æœï¼** ğŸš€

